"use strict";
/**
 * Â© 2017 Liferay, Inc. <https://liferay.com>
 *
 * SPDX-License-Identifier: LGPL-3.0-or-later
 */
Object.defineProperty(exports, "__esModule", { value: true });
const util_1 = require("./util");
/**
 * A loader that adds the `com.liferay.portlet.header-portlet-css` to the
 * `package.json` file.
 *
 * This loader allows adding a CSS file path to be used by the generated portlet
 * on the fly.
 *
 * It is normally used from adapted projects to inject the framework's generated
 * CSS file into the portlet.
 */
function default_1(context, options) {
    const { content, log } = context;
    const { css } = util_1.replaceTokens(options);
    const pkgJson = JSON.parse(content);
    pkgJson['portlet'] = pkgJson['portlet'] || {};
    pkgJson['portlet']['com.liferay.portlet.header-portlet-css'] = css;
    log.info('add-css-portlet-header', `Added ${css} as portlet CSS file`);
    return JSON.stringify(pkgJson, null, '\t');
}
exports.default = default_1;
