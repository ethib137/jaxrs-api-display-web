"use strict";
/**
 * Â© 2017 Liferay, Inc. <https://liferay.com>
 *
 * SPDX-License-Identifier: LGPL-3.0-or-later
 */
Object.defineProperty(exports, "__esModule", { value: true });
const util_1 = require("./util");
/**
 * A loader that removes webpack hashes from filenames.
 *
 * @remarks
 * A webpack hash is defined as the rightmost hex number surrounded by dots in a
 * file name.
 */
function default_1(context) {
    const { content, filePath, extraArtifacts, log } = context;
    const newFilePath = util_1.removeWebpackHash(filePath);
    if (newFilePath === filePath) {
        log.info('remove-webpack-hash', `No webpack hash in filename; nothing to be done`);
        return;
    }
    extraArtifacts[newFilePath] = content;
    context.content = undefined;
    log.info('remove-webpack-hash', `Diverting file output to ${newFilePath}`);
    return undefined;
}
exports.default = default_1;
